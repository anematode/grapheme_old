var Grapheme=function(t){"use strict";function e(t){let e=0;for(let n=0;n<t.length;n++)if("("===t[n]?e++:")"===t[n]&&e--,e<0)return!1;return 0===e}function*n(t){if(!e(t))return void(yield-1);yield 0;let n,i,a=0;for(let e=0;e<t.length;e++){if("("===(n=t[e])?a++:")"===n&&a--,a<0)throw"Unbalanced parentheses at char "+e+".";if("("===n){if(e>=1){i="";let n=e-1;for(;n>=0&&x(t[n]);n--);if(e-n<=1)continue;yield{data:{type:0,value:i=t.slice(n+1,e)}}}}else if(")"===n)yield{data:{type:1}};else if("&"===n&&e>=1){i="";let n=e-1;for(;n>=0&&("("!==t[n]&&")"!==t[n]&&","!==t[n]);n--);if(e-n<=1)continue;yield{data:{type:2,value:i=t.slice(n+1,e)}}}}}function i(t){return c[t]?c[t]:p[t]?p[t]:m(t)?new u(+t):new o(t)}class a{constructor(t,e,n){this.type=t,this.execute=e,this.props=n||{}}evaluate(t){return this.execute(t)}}var s=(t,e)=>t+e,h=(t,e)=>t*e,r={NULL:new a("NULL",function(t){return NaN}),ADD:new a("ADD",function(t){return t.reduce(s)},{associative:!0,commutative:!0,distributive:!0}),MUL:new a("MUL",function(t){return t.reduce(h)},{associative:!0,commutative:!0,distributive:!0}),SUB:new a("SUB",function(t){return t[0]-t[1]}),DIV:new a("DIV",function(t){return t[0]/t[1]}),SIN:new a("SIN",function(t){return Math.sin(t[0])}),COS:new a("COS",function(t){return Math.cos(t[0])}),TAN:new a("TAN",function(t){return Math.tan(t[0])}),CSC:new a("CSC",function(t){return 1/Math.sin(t[0])}),SEC:new a("SEC",function(t){return 1/Math.cos(t[0])}),COT:new a("COT",function(t){return 1/Math.tan(t[0])}),SGN:new a("SGN",function(t){return Math.sign(t[0])}),POW:new a("EXP",function(t){return Math.pow(t[0],t[1])}),SQRT:new a("SQRT",function(t){return Math.sqrt(t[0])}),EXP:new a("EXP",function(t){return Math.exp(t[0])}),SQ:new a("SQ",function(t){return t[0]*t[0]})};class o{constructor(t){this.name=t,this.isVariable=!0}evaluate(t){return void 0!==t[this.name]?t[this.name]:0}is(t){return this.name===t.name}deepCopy(){return new o(this.name)}flatten(){return"x"===this.name||"y"===this.name?"["+this.name+"1,"+this.name+"2]":"vars."+this.name}}class u{constructor(t){this.value=+t,this.isConstant=!0}evaluate(){return this.value}equals(t){return this.value===t.value}close(t,e=1e-9){return Math.abs(this.value-t.value)<e}deepCopy(){return new u(this.value)}flatten(){return"["+this.value+","+this.value+"]"}}class l{constructor(t,e){this.name=t,this.value=e,this.isConstant=!0}evaluate(){return+this.value}equals(t){return this.value===t.value}close(t,e=1e-9){return Math.abs(this.value-t.value)<e}isConstant(){return!0}isVariable(){return!1}deepCopy(){return this}flatten(){return"["+this.value+","+this.value+"]"}}var c={PI:new l("PI",Math.PI),E:new l("E",Math.E)},p={x:new o("x"),y:new o("y")};class v{constructor(t,e,n){this.operator=t,this.tree=e,n?(this.parent=n,this.topNode=!1):this.topNode=!0,this.props={},this.isNode=!0}clearProps(){this.props={}}deepClearProps(){for(let t=0;t<this.tree.length;t++)this.tree[t].isNode&&this.tree[t].deepClearProps()}surfaceClearProps(){this.props={},this.topNode||this.parent.surfaceClearProps()}traverseBranches(t,e=!0){for(let n=0;n<this.tree.length;n++)this.tree[n].isNode&&(e||t(this),this.tree[n].traverseBranches(t,e),e&&t(this))}traverseNodesAsParent(t,e=!0){for(let n=0;n<this.tree.length;n++)e||t(this,n),this.tree[n].isNode&&this.tree[n].traverseNodesAsParent(t,e),e&&t(this,n)}fixParents(t){t&&(this.parent=t,this.topNode=!1);for(let t=0;t<this.tree.length;t++)this.tree[t].isNode&&this.tree[t].fixParents(this)}evaluate(t){return this.operator.evaluate(this.tree.map(e=>e.evaluate(t)))}deepCopy(){return new v(this.operator,this.tree.map(t=>t.deepCopy()),this.parent)}flatten(){return`Grapheme.Interval.${this.operator.type}(${this.tree.map(t=>t.flatten()).join(",")})`}hf(){return Function(this.flatten())}}var f=t=>r[t]?r[t]:r.NULL,m=t=>!isNaN(parseFloat(t)),x=function(t){let e=t.charCodeAt();return e>64&&e<91||e>96&&e<123},M=function(t,e=!0,n=!0){if(t.isNode){if(void 0!==t.props.isASTConstant)return t.props.isASTConstant;for(let i=0;i<t.tree.length;i++)if(!M(t.tree[i],n,n))return e&&(t.props.isASTConstant=!1),!1;return e&&(t.props.isASTConstant=!0),!0}return!!t.isConstant||(e&&t.isNode&&(t.props.isASTConstant=!1),!1)};class d{constructor(t){this.tree=[t]}traverseNodesAsParent(t,e=!0){for(let n=0;n<this.tree.length;n++)e||t(this,n),this.tree[n].isNode&&this.tree[n].traverseNodesAsParent(t,e),e&&t(this,n)}collapseConstants(t=!0){if(!t){let t=this.deepCopy();return t.traverseNodesAsParent(function(t,e){M(t.tree[e])&&(t.tree[e]=new u(t.tree[e].evaluate()))},!1),t}this.traverseNodesAsParent(function(t,e){M(t.tree[e])&&(t.tree[e]=new u(t.tree[e].evaluate()))},!1)}flatten(){return`let intervals = ${this.tree[0].flatten()};\n      for (let i = 0; i < intervals.length; i += 2) {\n        if (intervals[i] <= 0 && intervals[i + 1] >= 0) {\n          return true;\n        }\n      }\n      return false;`}compilehf(){return Function("x1","x2","y1","y2",this.flatten())}}class g{constructor(t,e){this.hf=t,this.graphingCtx=e,this.view=e.view,this.canvas=e.canvas,this.HEAP=new Float32Array(250),this.graphing=!1,this.cancelGraph=!1}asyncGraphRangeDFS(t,e,n,i,a=1,s,h=-1){this.graphing=!0;var r=this.HEAP,o=this.hf,u=this.view,l=Date.now(),c=this.view.minxd,p=this.view.minyd;let v,f,m,x,M,d,g,w;var y=h>=0?h:0;if(o(t,e,n,i))for(-1===h&&(r[0]=t,r[1]=e,r[2]=n,r[3]=i,y+=4);y>=4;){if(y<60&&Date.now()>l+1e3/60){if(this.cancelGraph)return void(this.cancelGraph=!1);var C=this;return void setTimeout(function(){u.xmin===t&&u.xmax===e&&u.ymin===n&&u.ymax===i?C.asyncGraphRangeDFS(t,e,n,i,a,s,h=y):C.graphing=!1},5)}x=r[y-1],m=r[y-2],f=r[y-3],o(v=r[y-4],f,m,x)?Math.abs(v-f)<a*c?Math.abs(m-x)<a*p?(M=u.pointXtoCanvasX(v),d=u.pointYtoCanvasY(m),g=Math.max(u.pointXtoCanvasX(f)-M,a/2,1),w=Math.max(u.pointYtoCanvasY(x)-d,a/2,1),this.graphingCtx.ctx.fillRect(M+.5,d+.5,g+.5,w+.5),y-=4):(r[y-=4]=v,r[y+1]=f,r[y+2]=m,r[y+3]=(m+x)/2,r[y+4]=v,r[y+5]=f,r[y+6]=(m+x)/2,r[y+7]=x,y+=8):Math.abs(m-x)<a*p?(r[y-=4]=v,r[y+1]=(v+f)/2,r[y+2]=m,r[y+3]=x,r[y+4]=(v+f)/2,r[y+5]=f,r[y+6]=m,r[y+7]=x,y+=8):(r[y-=4]=v,r[y+1]=(v+f)/2,r[y+2]=m,r[y+3]=(m+x)/2,r[y+4]=(v+f)/2,r[y+5]=f,r[y+6]=(m+x)/2,r[y+7]=x,r[y+8]=v,r[y+9]=(v+f)/2,r[y+10]=(m+x)/2,r[y+11]=x,r[y+12]=(v+f)/2,r[y+13]=f,r[y+14]=m,r[y+15]=(m+x)/2,y+=16):y-=4}this.graphing=!1,s&&s()}graph(t=1){this.asyncGraphRangeDFS(this.view.xmin,this.view.xmax,this.view.ymin,this.view.ymax,t)}cancelGraphing(){this.graphing&&(this.cancelGraph=!0)}}class w{constructor(t,e){this.hf=t,this.graphingCtx=e,this.view=e.view,this.canvas=e.canvas,this.HEAP=new Float32Array(250),this.graphing=!1,this.cancelGraph=!1}asyncGraphRangeDFS(t,e,n,i,a=1,s,h=-1){this.graphing=!0;var r=this.HEAP,o=this.hf,u=this.view,l=Date.now(),c=this.view.minxd,p=this.view.minyd;let v,f,m,x,M,d,g,w;var y=h>=0?h:0;if(o(t,e,n,i))for(-1===h&&(r[0]=t,r[1]=e,r[2]=n,r[3]=i,y+=4);y>=4;){if(y<60&&Date.now()>l+1e3/60){if(this.cancelGraph)return void(this.cancelGraph=!1);var C=this;return void setTimeout(function(){u.xmin===t&&u.xmax===e&&u.ymin===n&&u.ymax===i?C.asyncGraphRangeDFS(t,e,n,i,a,s,h=y):C.graphing=!1},5)}x=r[y-1],m=r[y-2],f=r[y-3],o(v=r[y-4],f,m,x)?Math.abs(v-f)<a*c?Math.abs(m-x)<a*p?(M=u.pointXtoCanvasX(v),d=u.pointYtoCanvasY(m),g=Math.max(u.pointXtoCanvasX(f)-M,a/2,1),w=Math.max(u.pointYtoCanvasY(x)-d,a/2,1),this.graphingCtx.ctx.fillRect(M+.5,d+.5,g+.5,w+.5),y-=4):(r[y-=4]=v,r[y+1]=f,r[y+2]=m,r[y+3]=(m+x)/2,r[y+4]=v,r[y+5]=f,r[y+6]=(m+x)/2,r[y+7]=x,y+=8):Math.abs(m-x)<a*p?(r[y-=4]=v,r[y+1]=(v+f)/2,r[y+2]=m,r[y+3]=x,r[y+4]=(v+f)/2,r[y+5]=f,r[y+6]=m,r[y+7]=x,y+=8):(r[y-=4]=v,r[y+1]=(v+f)/2,r[y+2]=m,r[y+3]=(m+x)/2,r[y+4]=(v+f)/2,r[y+5]=f,r[y+6]=(m+x)/2,r[y+7]=x,r[y+8]=v,r[y+9]=(v+f)/2,r[y+10]=(m+x)/2,r[y+11]=x,r[y+12]=(v+f)/2,r[y+13]=f,r[y+14]=m,r[y+15]=(m+x)/2,y+=16):y-=4}this.graphing=!1,s&&s()}graph(t=1){this.asyncGraphRangeDFS(this.view.xmin,this.view.xmax,this.view.ymin,this.view.ymax,t)}cancelGraphing(){this.graphing&&(this.cancelGraph=!0)}}class y{constructor(t,e,n,i,a){this.parentCanvas=t,this.xmin=e||-5,this.xmax=n||5,this.ymin=i||-5,this.ymax=a||5}copyFrom(t){if(!(t instanceof y))throw"Cannot copy from an object that is not an instance of ViewWindow";this.xmax=t.xmax,this.xmin=t.xmin,this.ymax=t.ymax,this.ymin=t.ymin}copyTo(t){if(!(t instanceof y))throw"Cannot copy to an object that is not an instance of ViewWindow";t.xmax=this.xmax,t.xmin=this.xmin,t.ymax=this.ymax,t.ymin=this.ymin}area(){return this.xdelta*this.ydelta}perimeter(){return 2*(this.xdelta+this.ydelta)}get WIDTH(){return this.parentCanvas.width}get HEIGHT(){return this.parentCanvas.height}get xdelta(){return this.xmax-this.xmin}get ydelta(){return this.ymax-this.ymin}translate(t,e,n=!1){n&&(t=this.scaleCanvasXtoPointX(t),e=this.scaleCanvasYtoPointY(e)),this.xmin+=t,this.xmax+=t,this.ymin+=e,this.ymax+=e}zoom(t,e,n,i=!1){i&&(t=this.canvasXtoPointX(t),e=this.canvasYtoPointY(e)),this.xmin=n*(this.xmin-t)+t,this.xmax=n*(this.xmax-t)+t,this.ymin=n*(this.ymin-e)+e,this.ymax=n*(this.ymax-e)+e}scaleCanvasXtoPointX(t){return-t*this.xdelta/this.WIDTH}scaleCanvasYtoPointY(t){return t*this.ydelta/this.HEIGHT}canvasXtoPointX(t){return t*this.xdelta/this.WIDTH+this.xmin}canvasYtoPointY(t){return(1-t/this.HEIGHT)*this.ydelta+this.ymin}pointXtoCanvasX(t){return this.WIDTH*(t-this.xmin)/this.xdelta}pointYtoCanvasY(t){return this.HEIGHT*(1-(t-this.ymin)/this.ydelta)}canvasPointToPoint(t,e){return[canvasXtoPointX(t),canvasYtoPointY(t)]}pointToCanvasPoint(t,e){return[pointXtoCanvasX(t),pointYtoCanvasY(t)]}get minxd(){return.5*(this.xmax-this.xmin)/this.parentCanvas.width}get minyd(){return.5*(this.ymax-this.ymin)/this.parentCanvas.height}}class C{constructor(t,e,n){this.canvas=t,this.ctx=e,this.functions=[],n?(this.angleThreshold=n.angleThreshold||.02,this.epsilon=n.epsilon||1e-6,this.density=n.density||400,this.view=n.view||new y(this.canvas,-5,5,-5,5)):(this.angleThreshold=.5,this.epsilon=1e-6,this.density=100,this.view=new y(this.canvas,-5,5,-5,5))}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}line(t,e,n,i){this.ctx.moveTo(this.view.pointXtoCanvasX(t),this.view.pointYtoCanvasY(e)),this.ctx.beginPath(),this.ctx.lineTo(this.view.pointXtoCanvasX(n),this.view.pointYtoCanvasY(i)),this.ctx.stroke()}graphPoint(t,e){this.ctx.beginPath(),this.ctx.arc(this.view.pointXtoCanvasX(t),this.view.pointYtoCanvasY(e),3,0,2*Math.PI),this.ctx.stroke()}graphLine(t,e,n,i,a=!0){this.ctx.beginPath(),a&&this.ctx.moveTo(this.view.pointXtoCanvasX(t),this.view.pointYtoCanvasY(e)),this.ctx.lineTo(this.view.pointXtoCanvasX(n),this.view.pointYtoCanvasY(i)),this.ctx.stroke()}graphAll(t=1){for(let e=0;e<this.functions.length;e++)this.functions[e].graph(t)}addEquation(t){t instanceof g?this.functions.push(t):t instanceof Function?this.functions.push(new g(t,this)):t instanceof d&&this.functions.push(new g(t.compilehf(),this))}cancelGraphing(){for(let t=0;t<this.functions.length;t++)this.functions[t].cancelGraphing()}}var P=t=>t*t,I={MUL:function(t,e){let n,i=[];for(let a=0;a<t.length;a+=2)for(let s=0;s<e.length;s+=2)n=Math.min(t[a]*e[s],t[a]*e[s+1],t[a+1]*e[s],t[a+1]*e[s+1]),i.push(n),n=Math.max(t[a]*e[s],t[a]*e[s+1],t[a+1]*e[s],t[a+1]*e[s+1]),i.push(n);return i},ADD:function(t,e){let n=[];for(let i=0;i<t.length;i+=2)for(let a=0;a<e.length;a+=2)n.push(t[i]+e[a]),n.push(t[i+1]+e[a+1]);return n},DIV:function(t){let e,n,i=[];for(let a=0;a<t.length;a+=2)0===t[a]&&0===t[a+1]||(t[a]<=0&&t[a+1]>=0?(i.push(-1/0),i.push(1/t[a]),i.push(1/t[a+1]),i.push(1/0)):(e=1/t[a+1],n=1/t[a],i.push(Math.min(e,n)),i.push(Math.max(e,n))));return i},SQ:function(t){let e=[];for(let n=0;n<t.length;n+=2)t[n]<=0&&t[n+1]>=0?(e.push(0),e.push(P(Math.max(Math.abs(t[n]),Math.abs(t[n+1]))))):(e.push(P(Math.min(Math.abs(t[n]),Math.abs(t[n+1])))),e.push(P(Math.max(Math.abs(t[n]),Math.abs(t[n+1])))));return e},ABS:function(t){let e=[];for(let n=0;n<t.length;n++)if(0===t[n]&&0===t[n+1])e.push(0),e.push(0);else{if(t[n]<=0&&t[n+1]>=0){e.push(0),e.push(Math.max(Math.abs(t[n]),Math.abs([n+1])));continue}e.push(Math.min(Math.abs(t[n]),Math.abs([n+1]))),e.push(Math.max(Math.abs(t[n]),Math.abs([n+1])))}return e},SGN:function(t){let e=[];for(let n=0;n<t.length;n++)t[n]<0&&(e.push(-1),e.push(-1)),t[n+1]>0&&(e.push(1),e.push(1)),t[n]<=0&&t[n+1]>=0&&(e.push(0),e.push(0));return e},SIN:function(t){let e,n,i=[];for(let a=0;a<t.length;a+=2)if(t[a+1]-t[a]>=2*Math.PI)i.push(-1),i.push(1);else if(e=2*Math.PI*Math.floor((t[a]+Math.PI/2)/(2*Math.PI))+3*Math.PI/2,n=2*Math.PI*Math.floor((t[a]+3*Math.PI/2)/(2*Math.PI))+Math.PI/2,t[a]<=e&&e<=t[a+1]){if(t[a]<=n&&n<=t[a+1]){i.push(-1),i.push(1);continue}i.push(-1),i.push(Math.max(Math.sin(t[a]),Math.sin(t[a+1])))}else{if(t[a]<=n&&n<=t[a+1]){i.push(Math.min(Math.sin(t[a]),Math.sin(t[a+1]))),i.push(1);continue}i.push(Math.min(Math.sin(t[a]),Math.sin(t[a+1]))),i.push(Math.max(Math.sin(t[a]),Math.sin(t[a+1])))}return i},COS:function(t){let e,n,i=[];for(let a=0;a<t.length;a+=2)if(t[a+1]-t[a]>=2*Math.PI)i.push(-1),i.push(1);else if(e=2*Math.PI*Math.floor((t[a]+Math.PI)/(2*Math.PI))+Math.PI,n=2*Math.PI*Math.floor(t[a]/(2*Math.PI))+2*Math.PI,t[a]<=e&&e<=t[a+1]){if(t[a]<=n&&n<=t[a+1]){i.push(-1),i.push(1);continue}i.push(-1),i.push(Math.max(Math.cos(t[a]),Math.cos(t[a+1])))}else{if(t[a]<=n&&n<=t[a+1]){i.push(Math.min(Math.cos(t[a]),Math.cos(t[a+1]))),i.push(1);continue}i.push(Math.min(Math.cos(t[a]),Math.cos(t[a+1]))),i.push(Math.max(Math.cos(t[a]),Math.cos(t[a+1])))}return i},TAN:function(t){let e,n=[];for(let i=0;i<t.length;i+=2)t[i+1]-t[i]>=Math.PI?(n.push(-1/0),n.push(1/0)):(e=Math.PI*Math.floor((t[i]+Math.PI/2)/Math.PI)+Math.PI/2,t[i]<=e&&e<=t[i+1]?(n.push(Math.tan(t[i])),n.push(1/0),n.push(-1/0),n.push(Math.tan(t[i+1]))):(n.push(Math.tan(t[i])),n.push(Math.tan(t[i+1]))));return n},CSC:function(t){}};return t.Operator=a,t.OPS=r,t.FunctionAST=d,t.ASTNode=v,t.isASTConstant=M,t.ASTConstantValue=function(t,e=!0,n=!0){if(M(t,e,n)){if(!e)return t.evaluate();if(e){let e=t.evaluate();return t.props.ASTConstantValue=e,e}}},t.ASTFromStringFunc=function(t){let e=[],s=n(t),h=s.next();if(-1===h)return null;for(;!(h=s.next()).done;)if(0===h.value.data.type)e.push(f(h.value.data.value));else if(1===h.value.data.type){let t=e.length-1;for(;t>=0&&!(e[t]instanceof a);t--);let n=new v(e[t],e.slice(t+1));e.splice(t),e.push(n)}else 2===h.value.data.type&&e.push(i(h.value.data.value));return 1!==e.length?null:(e[0].fixParents(),new d(e[0]))},t.GeneralEquation=g,t.GeneralInequality=w,t.ViewWindow=y,t.GraphingContext=C,t.Interval=I,t}({});
